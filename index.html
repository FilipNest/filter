<html>

<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/icons/favicon.png" rel="icon" type="icons/x-icon">

<head>

  <script src="/libraries/jquery/jquery.min.js" type="text/javascript" charset="utf-8"></script>

  <script src="/libraries/tagsinput/jquery.tagsinput.js"></script>

  <link rel="stylesheet" href="/libraries/tagsinput/jquery.tagsinput.css">

  <link rel="stylesheet" href="/style.css" />

  <title>Filters</title>

</head>

<body>

  <header>

    {{#unless req.session.user}}

    <a style="color:white" href="#login">Login</a> <a href="#register">register</a> {{else}} Logged in as {{req.session.user}}. {{/unless}}

  </header>

  <div id="tag-container">
    <input id="tags" value="{{tagsJSON}}" />
  </div>

  MESSAGES {{#if req.session.user}}

  <form id="postmessage" autocomplete="off" method="POST">

    <textarea id="words" name="words"></textarea>
    <input hidden id="tagField" name="tags" value="{{tagsJSON}}" />
    <button type="submit">Post as {{req.session.user}}</button>

  </form>

  <script>
    window.loggedIn = true;

  </script>

  {{/if}} 
  <script src="/filter.js"></script>

  {{#unless req.session.user}}
  <style>
    ul#chat {
      max-height: calc(100vh - 40px);
    }

  </style>



  <section class="form-block" id="login">

    <form action="/meta/login" method="post">
      <h2>Sign in</h2>
      <div>
        <label>Username/email:</label>
        <input type="text" name="username" />
      </div>
      <div>
        <label>Password:</label>
        <input type="password" name="password" />
      </div>
      <div>
        <input type="submit" value="Sign In" />
      </div>
    </form>

  </section>
  
  <section class="form-block" id="register">
    
    <form action="/meta/newUser" method="post">
      <h2>Create a new account</h2>
      <div>
        <label>Username:</label>
        <input type="text" name="username" />
      </div>
      <div>
        <label>Email:</label>
        <input type="email" name="email" />
      </div>
      <div>
        <label>Password:</label>
        <input type="password" name="password" />
      </div>
      <div>
        <input type="submit" value="Register" />
      </div>
    </form>

  </section>
  
  {{/unless}}

  </body>

</html>
